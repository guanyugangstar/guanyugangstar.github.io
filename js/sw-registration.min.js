/* ===========================================================
 * sw-registration.js
 * ===========================================================
 * Copyright 2016 @huxpro
 * Licensed under Apache 2.0
 * Register service worker.
 * ========================================================== */
function handleRegistration(registration){console.log("Service Worker Registered. ",registration);registration.onupdatefound=function(){const installingWorker=registration.installing;installingWorker.onstatechange=function(){if("installed"!==installingWorker.state)return;navigator.serviceWorker.controller?console.log("SW is updated"):console.log("A Visit without previous SW"),createSnackbar({message:"App ready for offline use.",duration:3000})}}}if(navigator.serviceWorker){navigator.serviceWorker.register("/sw.js").then(registration=>handleRegistration(registration)).catch(error=>{console.log("ServiceWorker registration failed: ",error)});navigator.serviceWorker.onmessage=function(e){console.log("SW: SW Broadcasting:",event);const data=e.data;"UPDATE_FOUND"==data.command&&(console.log("UPDATE_FOUND_BY_SW",data),createSnackbar({message:"Content updated.",actionText:"refresh",action:function(e){location.reload()}}))}}